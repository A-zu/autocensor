<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AutoCensor</title>
  <link rel="stylesheet" href="/static/styles.css">
  <script src="/static/script.js" defer></script>
</head>
<body>
  <div class="app-container">
    <header>
      <h1>AutoCensor</h1>
      <p class="subtitle">Upload files for automatic processing</p>
    </header>

    <main>
      <div class="content-grid">
        <!-- ‚îÄ‚îÄ Upload Section ‚îÄ‚îÄ -->
        <section class="upload-section">
          <h2>File Upload</h2>
          <div id="drop-area" class="upload-container">
            <div class="upload-icon">
              <!-- (SVG unchanged) -->
            </div>
            <p>Drag & drop your file here</p>
            <p class="upload-hint">Supports most media, .zip and .pdf files</p>
            <input type="file" id="file-input"
              accept=".zip,.pdf,.bmp,.dng,.jpeg,.jpg,.mpo,.png,.tif,.tiff,.webp,.pfm,.heic,.asf,.avi,.gif,.m4v,.mkv,.mov,.mp4,.mpeg,.mpg,.ts,.wmv,.webm"
              hidden />
            <button type="button" id="browse-btn" class="secondary-btn">Browse Files</button>

            <div id="file-info" class="file-info hidden">
              <span id="file-icon"></span>
              <span id="file-name" class="file-name"></span>
              <span id="file-type-badge" class="file-type-badge"></span>
            </div>
            <div id="error-message" class="error-message hidden"></div>
          </div>
        </section>

        <!-- ‚îÄ‚îÄ Options & Instructions ‚îÄ‚îÄ -->
        <section class="options-section">
          <h2>Processing Options</h2>

          <!-- Instruction before file chosen -->
          <div id="instruction-content" class="instruction-text">
            <p>üìÅ Upload a <strong>.zip file</strong> or media file to blur objects in images and videos.</p>
            <p>üìÑ Upload a <strong>.pdf file</strong> to redact sensitive information.</p>
          </div>

          <!-- Mode selector -->
          <div id="controls-container" class="hidden">
            <!-- Mode selector row -->
            <div class="mode-selector">
              <input type="radio" name="mode" id="mode-blur" value="blur" checked>
              <label for="mode-blur">Blur</label>

              <input type="radio" name="mode" id="mode-censor" value="censor">
              <label for="mode-censor">Censor</label>

              <input type="radio" name="mode" id="mode-detect" value="detect">
              <label for="mode-detect">Detect</label>
            </div>

            <div id="slider-container">
              <div id="threshold-group" class="slider-group">
                <label for="threshold-slider" class="slider-label">
                  Confidence Threshold: <span id="threshold-value">25%</span>
                </label>
                <input type="range" id="threshold-slider" min="0" max="100" value="25" step="1">
              </div>

              <div id="blur-group" class="slider-group">
                <label for="blur-slider" class="slider-label">
                  Blur Intensity: <span id="blur-value">50%</span>
                </label>
                <input type="range" id="blur-slider" min="0" max="100" value="50" step="1">
              </div>
            </div>
          </div>


          <!-- Generic Chat Form (swapped by JS) -->
          <div id="chat-form" class="hidden">
            <h3 id="form-title"></h3>
            <textarea id="chat-input" class="chat-input" rows="4"></textarea>
            <div class="submit-container">
              <button type="button" id="submit-btn" class="primary-btn" disabled>Submit</button>
              <div id="submit-loader" class="loader"></div>
            </div>
            <div id="submit-status" class="success-message hidden"></div>
          </div>
        </section>
      </div>

      <!-- ‚îÄ‚îÄ Sample Downloads ‚îÄ‚îÄ -->
      <section class="example-container">
        <h2>Sample Files</h2>
        <p class="example-text">Don't have a file? Download a sample:</p>
        <div class="example-buttons">
          <button id="sample-zip-btn" class="secondary-btn">Sample ZIP</button>
          <button id="sample-pdf-btn" class="secondary-btn">Sample PDF</button>
        </div>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 AutoCensor. All rights reserved.</p>
    </footer>
  </div>

  <iframe id="download-frame" name="download-frame" hidden></iframe>
</body>
</html>